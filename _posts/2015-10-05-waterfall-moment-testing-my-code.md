---
layout: post
title:  "Waterfall moment: Testing my code"
date:   2015-10-05 20:11:33
---

I've been writing code in one form or another for several years now. I started writing code specifically for the web, but so far now I've even developed command line tools and API's. Learning about these things was of course challenging but also fun, but in my opinion something that changed in a whole new level the way I write code (and think about code) is testing. Everytime I worked on a website or application I remember using that refresh button so many times and submitting that form more times than I can remember, just to make sure that it's working as expected. Specially on the back-end side of things. I worked a few projects with CodeIgniter and I never wrote tests. It wasn't until I started working with Laravel that I became familiar with "testing" because for me testing something was just writing the code and going to the browser, hit the refresh button and then make sure that everything was working.

I got curious about it when I got a copy of [this](https://leanpub.com/laravel-testing-decoded) book, that's when I found out that you could write code that the computer would run and you would see if your actual code works as expected. Instead of visiting the browser every time that you made a change. I learned about unit testing, integration and acceptance testing and all the tools and jargon associated with it. It wasn't easy of course. I think the most difficult thing about testing is learning how to do it well, cause believe me I messed up so many times, spent countless nights figuring out all the jargon associated with testing, mostly because even today we're still figuring this whole thing out.

Couple of months ago I was listening to [this](http://www.fullstackradio.com/19) podcast episode and mentions that the easiest way to learn about testing is testing at the higher level first (if you're reading this and you haven't written a single test before, listen to that particular episode, like right now) meaning that if you're starting out, write acceptance tests first (tests that interact with the browser, the DOM and checks responses) and then work your way in, to the unit level (tests for your actual classes and business logic). I mention that specifically because I started the other way around and maybe that's why for me this concept of "testing" was harder to grasp.

But certainly once you "get it", you won't want to test anything manually ever again, I certainly don't want to, even if in some cases I have to. I'm not saying that testing manually is wrong, because it's not. You're still testing your code, but manually. The fact that you can write a program to do it for you is certainly better.

## Testing has so many benefits
For me, the most beneficial thing about writing tests is the feeling of confidence when refactoring. Among all the other benefits. I can't emphasize how beneficial it is. Especially when improving your code. Tests have definitely changed the way I write code. I can't imagine how I would refactor an 100-line method, or some repetitive code without tests. How could I make sure that the refactor didn't broke anything? By var_dump(ing) stuff to the browser, and then refreshing, refreshing and refreshing? No, for me those days are gone. Don't be lazy and test your applications, you'll sleep better in the end.

Not to mention when deploying to production. How would you know that that bugfix that you pushed to github didn't broke anything on your production app? You may have fixed the bug you were currently working on, and made sure (by testing manually) that whatever problem the bug was causing on your codebase is not happening anymore. But how would you know (without tests) that that particular bug fix didn't introduced another (or several) bugs elsewhere? Crossing your fingers won't do all the time (lol). Everything might work well on your local environment, but what assurance do you have that it will not blow up once it goes live? Specially if you have clients paying you for whatever it is that you're building for them. Don't be lazy and test your applications, it'll guarantee you a good night's sleep.

It might be overwhelming (it was for me) understanding all the do's and dont's about testing, mocking, spies etc etc. Today, I'm still learning new things about all this stuff. Invest time on it, it'll be worth your effort and it will be of great benefit in the end. It will make you write better code, it will help you to find or reproduce bugs faster. It will help you design your API's better, you'll sit back and reason better about what you're trying to accomplish. You'll rest assured that on each line of code that you change, there's a test suite there to help you make sure that your changes didn't broke anything elsewhere on your codebase. Don't be lazy, write tests and you'll write better code.



